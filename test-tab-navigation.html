<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>标签页导航联动测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f7fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e8e8e8;
            border-radius: 6px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1e1c72;
        }
        .test-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        .test-steps {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #1e1c72;
        }
        .test-steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .test-steps li {
            margin-bottom: 8px;
            color: #555;
        }
        .expected-result {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #52c41a;
            margin-top: 15px;
        }
        .expected-result strong {
            color: #52c41a;
        }
        .note {
            background-color: #fff7e6;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #faad14;
            margin-top: 15px;
        }
        .note strong {
            color: #faad14;
        }
        .code-block {
            background-color: #f6f8fa;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #e1e4e8;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>标签页导航联动功能测试指南</h1>
        
        <div class="test-section">
            <div class="test-title">1. 左侧导航栏 → 标签页联动测试</div>
            <div class="test-description">
                测试点击左侧导航菜单项时，标签页的正确行为
            </div>
            <div class="test-steps">
                <ol>
                    <li>进入后台管理页面</li>
                    <li>观察当前激活的标签页和侧边栏高亮项</li>
                    <li>点击左侧导航栏中的"图片管理"菜单项</li>
                    <li>点击左侧导航栏中的"数据管理"菜单项</li>
                    <li>点击左侧导航栏中的"关于"菜单项</li>
                </ol>
            </div>
            <div class="expected-result">
                <strong>预期结果：</strong>
                <ul>
                    <li>点击菜单项后，页面自动跳转到对应路由</li>
                    <li>如果该路由对应的标签页未打开，自动新增标签页</li>
                    <li>如果标签页已存在，自动激活该标签页</li>
                    <li>标签页内容正确显示对应页面</li>
                    <li>侧边栏对应菜单项高亮显示</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">2. 标签页 → 左侧导航栏联动测试</div>
            <div class="test-description">
                测试点击标签页时，左侧导航栏的正确高亮状态
            </div>
            <div class="test-steps">
                <ol>
                    <li>确保有多个标签页打开</li>
                    <li>点击"图片管理"标签页</li>
                    <li>点击"数据管理"标签页</li>
                    <li>点击"关于"标签页</li>
                </ol>
            </div>
            <div class="expected-result">
                <strong>预期结果：</strong>
                <ul>
                    <li>点击标签页后，页面内容正确切换</li>
                    <li>左侧导航栏对应菜单项自动高亮</li>
                    <li>URL地址正确更新</li>
                    <li>面包屑导航显示正确的页面标题</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">3. 关闭标签页联动测试</div>
            <div class="test-description">
                测试关闭标签页时的正确跳转行为
            </div>
            <div class="test-steps">
                <ol>
                    <li>打开多个非固定标签页</li>
                    <li>关闭当前激活的标签页</li>
                    <li>关闭非激活的标签页</li>
                    <li>尝试关闭固定标签页（如果有的话）</li>
                </ol>
            </div>
            <div class="expected-result">
                <strong>预期结果：</strong>
                <ul>
                    <li>关闭当前激活标签页后，自动跳转到其他可用标签页</li>
                    <li>优先跳转到固定标签页，其次跳转到第一个可用标签页</li>
                    <li>关闭非激活标签页不影响当前页面</li>
                    <li>固定标签页无法关闭</li>
                    <li>关闭标签页后，侧边栏高亮状态正确更新</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">4. 路由驱动联动测试</div>
            <div class="test-description">
                验证所有联动逻辑都基于Vue Router，而不是局部状态
            </div>
            <div class="test-steps">
                <ol>
                    <li>在浏览器地址栏直接输入不同的路由地址</li>
                    <li>使用浏览器的前进/后退按钮</li>
                    <li>刷新页面</li>
                    <li>观察标签页和侧边栏的状态</li>
                </ol>
            </div>
            <div class="expected-result">
                <strong>预期结果：</strong>
                <ul>
                    <li>直接输入路由地址后，标签页和侧边栏状态完全同步</li>
                    <li>前进/后退操作后，状态正确恢复</li>
                    <li>刷新页面后，状态基于当前路由正确初始化</li>
                    <li>所有状态变化都通过路由变化触发，而不是手动设置</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">5. 技术实现要点</div>
            <div class="test-description">
                关键代码实现说明
            </div>
            <div class="code-block">
// 侧边栏菜单配置 - 基于路由驱动
&lt;el-menu
  :default-active="route.path"
  :collapse="sidebarCollapsed"
  :unique-opened="true"
  router
  class="sidebar-menu"
&gt;

// 标签页配置 - 基于路由路径
&lt;el-tab-pane
  v-for="tab in tabs"
  :key="tab.path"
  :label="tab.title"
  :name="tab.path"
  :closable="!tab.affix"
&gt;

// 路由监听 - 确保状态同步
watch(() => route.path, (newPath) => {
  activeTab.value = newPath
  addTab(newPath)
}, { immediate: true })

// 标签页点击处理 - 基于路由跳转
const handleTabClick = (tab: any) => {
  if (tab.name && tab.name !== route.path) {
    router.push(tab.name)
  }
}
            </div>
        </div>

        <div class="note">
            <strong>注意事项：</strong>
            <ul>
                <li>所有测试都应该在已登录的管理员状态下进行</li>
                <li>确保路由配置中有正确的 meta.title 和 meta.affix 设置</li>
                <li>测试过程中观察浏览器控制台是否有错误信息</li>
                <li>验证在不同主题模式下（亮色/暗色）的显示效果</li>
                <li>测试响应式布局下的标签页行为</li>
            </ul>
        </div>

        <div class="test-section">
            <div class="test-title">6. 常见问题排查</div>
            <div class="test-description">
                如果遇到问题，请检查以下几点
            </div>
            <div class="test-steps">
                <ol>
                    <li>检查路由配置是否正确设置了 meta.title</li>
                    <li>确认 Vuex store 中的状态管理是否正常</li>
                    <li>验证 keep-alive 和 router-view 的配置</li>
                    <li>检查浏览器控制台是否有 JavaScript 错误</li>
                    <li>确认 Element Plus 组件是否正确导入和注册</li>
                </ol>
            </div>
        </div>
    </div>
</body>
</html> 
<!DOCTYPE html>
<html>
<head>
    <title>å›¾ç‰‡æ˜¾ç¤ºå’Œç¼–è¾‘åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-section { 
            background: white; 
            margin: 20px 0; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #28a745; font-weight: bold; }
        .error { color: #dc3545; font-weight: bold; }
        .info { color: #007bff; font-weight: bold; }
        .warning { color: #ffc107; font-weight: bold; }
        button { 
            padding: 12px 24px; 
            margin: 8px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-size: 14px;
            transition: background-color 0.2s;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-primary:hover { background: #0056b3; }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #1e7e34; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-danger:hover { background: #c82333; }
        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .status-item {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f8f9fa;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:last-child {
            border-bottom: none;
        }
        .check-mark { color: #28a745; margin-right: 8px; }
        .x-mark { color: #dc3545; margin-right: 8px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ å›¾ç‰‡æ˜¾ç¤ºå’Œç¼–è¾‘åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>ğŸ“‹ ä¿®å¤å†…å®¹æ€»ç»“</h2>
        <div class="status-grid">
            <div class="status-item">
                <h3>âœ… å›¾ç‰‡è·¯å¾„ä¿®å¤</h3>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>ä½¿ç”¨Viteèµ„æºå¯¼å…¥ä»£æ›¿é™æ€è·¯å¾„</li>
                    <li><span class="check-mark">âœ“</span>ä¿®å¤å…¨å±ç¼–è¾‘é¡µé¢å›¾ç‰‡æ˜¾ç¤º</li>
                    <li><span class="check-mark">âœ“</span>ç¡®ä¿12å¼ é¢„ç½®å›¾ç‰‡æ­£ç¡®åŠ è½½</li>
                </ul>
            </div>
            
            <div class="status-item">
                <h3>âœ… æ•°æ®è¿‡æ»¤ä¼˜åŒ–</h3>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>è¿‡æ»¤æ— æ•ˆçš„è‡ªå®šä¹‰å›¾ç‰‡</li>
                    <li><span class="check-mark">âœ“</span>é˜²æ­¢ç©ºç™½å›¾ç‰‡æ˜¾ç¤º</li>
                    <li><span class="check-mark">âœ“</span>æ·»åŠ æ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥</li>
                </ul>
            </div>
            
            <div class="status-item">
                <h3>âœ… ç±»å‹å®‰å…¨æ”¹è¿›</h3>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>ä¿®å¤TypeScriptç¼–è¯‘é”™è¯¯</li>
                    <li><span class="check-mark">âœ“</span>æ·»åŠ ç©ºå€¼æ£€æŸ¥</li>
                    <li><span class="check-mark">âœ“</span>ç¡®ä¿ä»£ç è¿è¡Œç¨³å®šæ€§</li>
                </ul>
            </div>
            
            <div class="status-item">
                <h3>âœ… åæ ‡æ•°æ®å®Œæ•´</h3>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>12å¼ å›¾ç‰‡ç²¾ç¡®åæ ‡é…ç½®</li>
                    <li><span class="check-mark">âœ“</span>çœŸå®å®‰å…¨æ•™è‚²å†…å®¹</li>
                    <li><span class="check-mark">âœ“</span>å¤šæ ·åŒ–è¿æ¥çº¿ç±»å‹</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•æ­¥éª¤</h2>
        <div id="test-results"></div>
        
        <h3>1. æ¸…ç†å’Œé‡ç½®</h3>
        <button class="btn-danger" onclick="clearAllData()">æ¸…ç†æ‰€æœ‰å­˜å‚¨æ•°æ®</button>
        <button class="btn-warning" onclick="checkCurrentState()">æ£€æŸ¥å½“å‰çŠ¶æ€</button>
        
        <h3>2. å›¾ç‰‡ç®¡ç†æµ‹è¯•</h3>
        <button class="btn-primary" onclick="window.open('/admin/images', '_blank')">æ‰“å¼€å›¾ç‰‡ç®¡ç†é¡µé¢</button>
        <button class="btn-success" onclick="testImageCounts()">éªŒè¯å›¾ç‰‡æ•°é‡</button>
        
        <h3>3. å…¨å±ç¼–è¾‘æµ‹è¯•</h3>
        <p class="info">ç‚¹å‡»å›¾ç‰‡ç®¡ç†é¡µé¢ä¸­çš„"å…¨å±ç¼–è¾‘"æŒ‰é’®æµ‹è¯•å›¾ç‰‡æ˜¾ç¤º</p>
        
        <h3>4. æ¸¸æˆåŠŸèƒ½æµ‹è¯•</h3>
        <button class="btn-success" onclick="window.open('/', '_blank')">å¯åŠ¨æ¸¸æˆæµ‹è¯•</button>
        
        <div id="test-output" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px;"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ“Š é¢„æœŸç»“æœ</h2>
        <div class="status-grid">
            <div class="status-item">
                <h4>å›¾ç‰‡ç®¡ç†é¡µé¢åº”è¯¥æ˜¾ç¤ºï¼š</h4>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>æ°å¥½12å¼ é¢„ç½®å›¾ç‰‡</li>
                    <li><span class="check-mark">âœ“</span>æ²¡æœ‰ç©ºç™½å›¾ç‰‡</li>
                    <li><span class="check-mark">âœ“</span>æ¯å¼ å›¾ç‰‡éƒ½æœ‰æ­£ç¡®çš„æ ‡é¢˜</li>
                    <li><span class="check-mark">âœ“</span>æ˜¾ç¤º"0ä¸ªè­¦ç¤ºç‚¹"æˆ–å®é™…ç‚¹ä½æ•°</li>
                </ul>
            </div>
            
            <div class="status-item">
                <h4>å…¨å±ç¼–è¾‘é¡µé¢åº”è¯¥æ˜¾ç¤ºï¼š</h4>
                <ul class="feature-list">
                    <li><span class="check-mark">âœ“</span>å›¾ç‰‡æ­£å¸¸åŠ è½½æ˜¾ç¤º</li>
                    <li><span class="check-mark">âœ“</span>æ˜¾ç¤ºæ‰€æœ‰é¢„è®¾ç‚¹ä½</li>
                    <li><span class="check-mark">âœ“</span>è¿æ¥çº¿æ­£ç¡®æ˜¾ç¤º</li>
                    <li><span class="check-mark">âœ“</span>ç‚¹å‡»å¯ä»¥æŸ¥çœ‹è¯¦ç»†è¯´æ˜</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function logOutput(message, type = 'info') {
            const output = document.getElementById('test-output');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : 'info';
            output.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        function clearAllData() {
            try {
                const keysToRemove = [];
                Object.keys(localStorage).forEach(key => {
                    if (key.includes('game') || key.includes('image') || key.includes('level') || key.includes('preset')) {
                        keysToRemove.push(key);
                    }
                });
                
                keysToRemove.forEach(key => localStorage.removeItem(key));
                
                // è®¾ç½®åˆå§‹ç©ºæ•°æ®
                const initialData = {
                    version: '2.0',
                    settings: { totalLevels: 12, countdownSeconds: 30, flashThreshold: 10 },
                    levels: [],
                    exportTime: new Date().toISOString()
                };
                
                localStorage.setItem('game-data', JSON.stringify(initialData));
                
                logOutput(`âœ… æ¸…ç†å®Œæˆï¼åˆ é™¤äº† ${keysToRemove.length} ä¸ªå­˜å‚¨é”®`, 'success');
                logOutput('ğŸ“ å·²é‡ç½®ä¸ºä»…åŒ…å«é¢„ç½®å›¾ç‰‡çš„çŠ¶æ€', 'info');
            } catch (error) {
                logOutput(`âŒ æ¸…ç†å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function checkCurrentState() {
            try {
                const gameData = localStorage.getItem('game-data');
                const allKeys = Object.keys(localStorage);
                const imageKeys = allKeys.filter(key => key.startsWith('image_'));
                
                let gameDataObj = null;
                if (gameData) {
                    gameDataObj = JSON.parse(gameData);
                }
                
                logOutput('ğŸ“Š å½“å‰å­˜å‚¨çŠ¶æ€:', 'info');
                logOutput(`  â€¢ localStorage æ€»é”®æ•°: ${allKeys.length}`, 'info');
                logOutput(`  â€¢ game-data å­˜åœ¨: ${gameData ? 'æ˜¯' : 'å¦'}`, 'info');
                logOutput(`  â€¢ è‡ªå®šä¹‰å…³å¡æ•°: ${gameDataObj?.levels?.length || 0}`, 'info');
                logOutput(`  â€¢ image_ é”®æ•°é‡: ${imageKeys.length}`, 'info');
                
                if (gameDataObj?.levels?.length > 0) {
                    logOutput(`âš ï¸ æ£€æµ‹åˆ° ${gameDataObj.levels.length} ä¸ªè‡ªå®šä¹‰å…³å¡ï¼Œå¯èƒ½å¯¼è‡´é¢å¤–å›¾ç‰‡æ˜¾ç¤º`, 'warning');
                }
            } catch (error) {
                logOutput(`âŒ æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
            }
        }
        
        function testImageCounts() {
            // æ¨¡æ‹Ÿæ£€æŸ¥é¢„ç½®å›¾ç‰‡æ•°é‡
            logOutput('ğŸ” éªŒè¯é¢„ç½®å›¾ç‰‡é…ç½®...', 'info');
            
            // è¿™é‡Œæ¨¡æ‹Ÿé¢„ç½®å›¾ç‰‡æ•°æ®
            const expectedImages = [
                'é‚®ä»¶å®‰å…¨è¯†åˆ«1', 'é‚®ä»¶å®‰å…¨è¯†åˆ«2', 'ç½‘ç«™å®‰å…¨è¯†åˆ«1', 'é‚®ä»¶å®‰å…¨è¯†åˆ«3',
                'é‚®ä»¶å®‰å…¨è¯†åˆ«4', 'é‚®ä»¶å®‰å…¨è¯†åˆ«5', 'é‚®ä»¶å®‰å…¨è¯†åˆ«6', 'é‚®ä»¶å®‰å…¨è¯†åˆ«7',
                'ç½‘ç«™å®‰å…¨è¯†åˆ«2', 'åŠå…¬å®‰å…¨è¯†åˆ«1', 'åŠå…¬å®‰å…¨è¯†åˆ«2', 'åŠå…¬å®‰å…¨è¯†åˆ«3'
            ];
            
            logOutput(`âœ… é¢„ç½®å›¾ç‰‡é…ç½®æ­£ç¡®: ${expectedImages.length} å¼ `, 'success');
            expectedImages.forEach((name, index) => {
                logOutput(`  ${index + 1}. ${name}`, 'info');
            });
            
            logOutput('ğŸ’¡ è¯·æ‰“å¼€å›¾ç‰‡ç®¡ç†é¡µé¢éªŒè¯å®é™…æ˜¾ç¤ºæ•°é‡', 'info');
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥çŠ¶æ€
        window.onload = () => {
            logOutput('ğŸš€ å›¾ç‰‡æ˜¾ç¤ºåŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½', 'success');
            logOutput('ğŸ“ è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯å„é¡¹åŠŸèƒ½', 'info');
            checkCurrentState();
        };
    </script>
</body>
</html>

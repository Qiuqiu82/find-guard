<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•åæ ‡æ•°æ®</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .coordinate-test { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 8px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        .summary { background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #f0f0f0; }
        .connection-type { font-weight: bold; }
        .connection-right { color: #28a745; }
        .connection-left { color: #dc3545; }
        .connection-vertical { color: #007bff; }
        .connection-none { color: #6c757d; }
    </style>
</head>
<body>
    <h1>åæ ‡æ•°æ®æµ‹è¯•</h1>
    <div id="results"></div>
    
    <script>
        // ä»å¤‡ä»½æ–‡æ¡£ä¸­æå–çš„ç²¾ç¡®åæ ‡æ•°æ®
        const coordinateData = [
            {
                name: 'p1.jpg',
                title: 'é‚®ä»¶å®‰å…¨è¯†åˆ«1',
                points: [
                    { x: 75, y: 9, width: 360, height: 53, connectionType: 'right', title: 'æ³¨æ„è¾¨åˆ«å‘ä»¶ä¸»é¢˜', detail: 'é‚®ä»¶ä¸»é¢˜ä¸ºé€šçŸ¥çš„ï¼Œéœ€æ ¼å¤–æ³¨æ„é‚®ä»¶çœŸå®æ€§' },
                    { x: 177, y: 127, width: 450, height: 43, connectionType: 'right', title: 'å‘ä»¶äººé‚®ç®±å¼‚å¸¸', detail: 'å‘ä»¶äººä¼ªé€ å®‰å…¨æœåŠ¡ä¸­å¿ƒï¼Œéœ€è¦æ ¸å®å®é™…åŸŸåæ˜¯å¦ä¸ºå…¬å¸å†…éƒ¨çœŸå®åŸŸå' },
                    { x: 203, y: 555, width: 210, height: 45, connectionType: 'right', title: 'æ­£æ–‡å†…å®¹è¦ç•™å¿ƒ', detail: 'é‚®ä»¶å†…å®¹åŒ…å«ç™»å½•åœ°ç‚¹å¼‚å¸¸ï¼Œåˆ¶é€ ç´§å¼ æ°”æ°›ï¼Œé¦–å…ˆé€šè¿‡é‚®ç®±ç½‘ç«™è¿›è¡ŒæŸ¥è¯¢' },
                    { x: 188, y: 814, width: 188, height: 77, connectionType: 'right', title: 'æ³¨æ„é‚®ä»¶é“¾æ¥', detail: 'é¿å…ä»é‚®ä»¶å†…éƒ¨é‡ç½®å¯†ç é“¾æ¥è¿›è¡Œç‚¹å‡»è®¿é—®ï¼Œå¦‚éœ€é‡ç½®å¯†ç é€šè¿‡å®˜æ–¹é€”å¾„è¿›è¡Œ' }
                ]
            },
            {
                name: 'p2.jpg',
                title: 'é‚®ä»¶å®‰å…¨è¯†åˆ«2',
                points: [
                    { x: 72, y: 7, width: 675, height: 66, connectionType: 'right', title: 'ä¸»é¢˜éœ€è¦æ³¨æ„', detail: 'å…¬å¸å†…éƒ¨çš„é€šçŸ¥ä½†æ˜¯æ˜¾ç¤ºçš„æ˜¯å¤–éƒ¨çš„é‚®ä»¶è¯´æ˜' },
                    { x: 174, y: 129, width: 420, height: 43, connectionType: 'right', title: 'å‘ä»¶äººé‚®ç®±å¼‚å¸¸', detail: 'å‘ä»¶äººåŸŸåè¿›è¡Œäº†ä¼ªè£…ï¼Œä»”ç»†æŸ¥çœ‹å‘ç°è¿˜æ˜¯æœ‰åŒºåˆ«çš„' },
                    { x: 623, y: 525, width: 240, height: 53, connectionType: 'left', title: 'æ³¨æ„é‚®ä»¶é“¾æ¥', detail: 'é‚®ä»¶å­˜åœ¨é“¾æ¥éœ€è¦æ ¼å¤–æ³¨æ„ï¼Œé¦–å…ˆæ ¸å®é“¾æ¥ä¸­çš„åŸŸåæ˜¯å¦ä¸ºä¼ä¸šçœŸå®åŸŸåï¼Œå¦‚æœä¸æ˜¯åŠæ—¶ä¸ŠæŠ¥' }
                ]
            },
            {
                name: 'p3.jpg',
                title: 'ç½‘ç«™å®‰å…¨è¯†åˆ«1',
                points: [
                    { x: 105, y: 16, width: 180, height: 59, connectionType: 'vertical-horizontal', title: 'è®¿é—®ç½‘ç«™éœ€è¦æœ‰è¯ä¹¦', detail: 'è®¿é—®ç½‘ç«™å¦‚æœæ˜¾ç¤ºä¸å®‰å…¨ï¼Œé‡‡ç”¨httpè®¿é—®ï¼Œéœ€è¦æ ¼å¤–æ³¨æ„æ•°æ®å®‰å…¨æ€§ï¼Œæœ‰è¢«ç›—å–æ•°æ®çš„é£é™©' },
                    { x: 288, y: 16, width: 207, height: 59, connectionType: 'right', title: 'ç½‘ç«™åŸŸåè¦æ ¸å¯¹', detail: 'è®¿é—®ç½‘ç«™è®°å¾—æ ¸å¯¹åŸŸåï¼Œä¸ä¼ä¸šçœŸå®åŸŸåå­˜åœ¨å·®å¼‚' },
                    { x: 180, y: 121, width: 255, height: 59, connectionType: 'right', title: 'ç½‘ç«™å¸ƒå±€å¼‚å¸¸', detail: 'ä¼ä¸šlogoåç§°å­˜åœ¨å°‘å­—çš„æƒ…å†µéœ€è¦æ ¼å¤–æ³¨æ„ï¼Œæœ‰å¯èƒ½æ˜¯ä¼ªé€ ç½‘ç«™' },
                    { x: 1155, y: 369, width: 570, height: 530, connectionType: 'left', title: 'ç™»å½•å†…å®¹æ³¨æ„ç”„åˆ«', detail: 'å…¬å…±ç½‘ç«™ç™»å½•é€”å¾„ä¸€èˆ¬è¾ƒå¤šï¼Œè‹¥åªæ˜¯å•ä¸€è´¦å·è®¿é—®ï¼Œå¹¶ä¸”æ²¡æœ‰æ³¨å†Œç­‰é€‰é¡¹éœ€è¦é¢å¤–æ³¨æ„' }
                ]
            }
        ];
        
        const resultsDiv = document.getElementById('results');
        
        // æ˜¾ç¤ºæ€»ä½“ç»Ÿè®¡
        const totalImages = 12;
        let totalPoints = 0;
        coordinateData.forEach(img => totalPoints += img.points.length);
        
        const summaryDiv = document.createElement('div');
        summaryDiv.className = 'summary';
        summaryDiv.innerHTML = `
            <h2>ğŸ“Š åæ ‡æ•°æ®æ€»è§ˆ</h2>
            <p><strong>å›¾ç‰‡æ€»æ•°:</strong> ${totalImages} å¼ </p>
            <p><strong>æ˜¾ç¤ºç‚¹ä½:</strong> ${totalPoints} ä¸ªï¼ˆå‰3å¼ å›¾ç‰‡ï¼‰</p>
            <p><strong>æ•°æ®æº:</strong> å…³å¡åæ ‡å¤‡ä»½.md</p>
            <p><strong>åæ ‡ç³»ç»Ÿ:</strong> åŸºäº1920x945è®¾è®¡å°ºå¯¸</p>
        `;
        resultsDiv.appendChild(summaryDiv);
        
        // æ˜¾ç¤ºæ¯å¼ å›¾ç‰‡çš„è¯¦ç»†ä¿¡æ¯
        coordinateData.forEach((imageData, index) => {
            const div = document.createElement('div');
            div.className = 'coordinate-test';
            
            const title = document.createElement('h3');
            title.innerHTML = `ğŸ“· å›¾ç‰‡${index + 1}: ${imageData.name} - ${imageData.title}`;
            div.appendChild(title);
            
            const info = document.createElement('p');
            info.className = 'info';
            info.innerHTML = `âœ… ç‚¹ä½æ•°é‡: ${imageData.points.length} ä¸ª`;
            div.appendChild(info);
            
            // åˆ›å»ºè¡¨æ ¼æ˜¾ç¤ºåæ ‡è¯¦æƒ…
            const table = document.createElement('table');
            table.innerHTML = `
                <thead>
                    <tr>
                        <th>åºå·</th>
                        <th>Xåæ ‡</th>
                        <th>Yåæ ‡</th>
                        <th>å®½åº¦</th>
                        <th>é«˜åº¦</th>
                        <th>è¿æ¥ç±»å‹</th>
                        <th>æ ‡é¢˜</th>
                        <th>è¯¦ç»†è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    ${imageData.points.map((point, i) => `
                        <tr>
                            <td>${i + 1}</td>
                            <td>${point.x}</td>
                            <td>${point.y}</td>
                            <td>${point.width}</td>
                            <td>${point.height}</td>
                            <td class="connection-type connection-${point.connectionType}">${point.connectionType}</td>
                            <td style="max-width: 200px;">${point.title}</td>
                            <td style="max-width: 300px; font-size: 12px;">${point.detail}</td>
                        </tr>
                    `).join('')}
                </tbody>
            `;
            div.appendChild(table);
            
            resultsDiv.appendChild(div);
        });
        
        // æ£€æŸ¥localStorageä¸­çš„æ•°æ®
        setTimeout(() => {
            const gameData = localStorage.getItem('game-data');
            const storageDiv = document.createElement('div');
            storageDiv.className = 'coordinate-test';
            
            if (gameData) {
                try {
                    const parsed = JSON.parse(gameData);
                    const levelsCount = parsed.levels ? parsed.levels.length : 0;
                    const version = parsed.version || 'æœªçŸ¥';
                    
                    storageDiv.innerHTML = `
                        <h3>ğŸ’¾ æœ¬åœ°å­˜å‚¨çŠ¶æ€</h3>
                        <p class="success">âœ… æ¸¸æˆæ•°æ®å·²åŠ è½½</p>
                        <p><strong>ç‰ˆæœ¬:</strong> ${version}</p>
                        <p><strong>å…³å¡æ•°é‡:</strong> ${levelsCount}</p>
                        <p><strong>æ•°æ®ç»“æ„:</strong> ${parsed.levels ? 'æ–°ç‰ˆæœ¬æ ¼å¼' : 'æ—§ç‰ˆæœ¬æ ¼å¼'}</p>
                        ${levelsCount >= 12 ? '<p class="success">âœ… åŒ…å«å®Œæ•´çš„12å¼ é¢„ç½®å›¾ç‰‡</p>' : '<p class="error">âŒ é¢„ç½®å›¾ç‰‡ä¸å®Œæ•´</p>'}
                    `;
                } catch (e) {
                    storageDiv.innerHTML = `
                        <h3>ğŸ’¾ æœ¬åœ°å­˜å‚¨çŠ¶æ€</h3>
                        <p class="error">âŒ æ•°æ®æ ¼å¼é”™è¯¯: ${e.message}</p>
                    `;
                }
            } else {
                storageDiv.innerHTML = `
                    <h3>ğŸ’¾ æœ¬åœ°å­˜å‚¨çŠ¶æ€</h3>
                    <p class="error">âŒ æœªæ‰¾åˆ°æ¸¸æˆæ•°æ®</p>
                `;
            }
            
            resultsDiv.appendChild(storageDiv);
        }, 1000);
        
        // æ·»åŠ æ“ä½œæŒ‰é’®
        const actionsDiv = document.createElement('div');
        actionsDiv.className = 'coordinate-test';
        actionsDiv.innerHTML = `
            <h3>ğŸ”§ æµ‹è¯•æ“ä½œ</h3>
            <button onclick="clearAndReload()" style="padding: 10px 20px; margin: 5px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">æ¸…ç†æ•°æ®å¹¶é‡æ–°åŠ è½½</button>
            <button onclick="window.open('/admin/images', '_blank')" style="padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">æ‰“å¼€å›¾ç‰‡ç®¡ç†</button>
            <button onclick="window.open('/', '_blank')" style="padding: 10px 20px; margin: 5px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">å¯åŠ¨æ¸¸æˆ</button>
        `;
        resultsDiv.appendChild(actionsDiv);
        
        // æ¸…ç†æ•°æ®å¹¶é‡æ–°åŠ è½½çš„å‡½æ•°
        window.clearAndReload = function() {
            localStorage.removeItem('game-data');
            localStorage.removeItem('currentLevelData');
            localStorage.clear();
            alert('æ•°æ®å·²æ¸…ç†ï¼Œé¡µé¢å°†é‡æ–°åŠ è½½');
            window.location.reload();
        };
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ‡ç­¾é¡µåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
            background-color: #f5f7fa;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .tabs-demo {
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .tabs-header {
            background: #fafafa;
            border-bottom: 1px solid #e8e8e8;
            padding: 0;
            margin: 0;
            list-style: none;
            display: flex;
        }
        
        .tab-item {
            padding: 12px 20px;
            border-right: 1px solid #e8e8e8;
            cursor: pointer;
            position: relative;
            background: white;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab-item:hover {
            background: #f5f5f5;
        }
        
        .tab-item.active {
            background: #1e1c72;
            color: white;
        }
        
        .tab-item.affix {
            background: #f0f0f0;
            color: #666;
        }
        
        .tab-item.affix.active {
            background: #1e1c72;
            color: white;
        }
        
        .tab-close {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #ccc;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-close:hover {
            background: #ff4757;
        }
        
        .tab-item.affix .tab-close {
            display: none;
        }
        
        .tabs-content {
            padding: 24px;
            min-height: 200px;
            background: white;
        }
        
        .sidebar-demo {
            display: flex;
            gap: 30px;
        }
        
        .sidebar {
            width: 200px;
            background: #001529;
            border-radius: 8px;
            padding: 16px;
        }
        
        .sidebar-item {
            color: white;
            padding: 12px 16px;
            margin: 4px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-item.active {
            background: rgba(255, 255, 255, 0.2);
            border-right: 3px solid #1e1c72;
        }
        
        .content-area {
            flex: 1;
            background: white;
            border-radius: 8px;
            padding: 24px;
            border: 1px solid #e8e8e8;
        }
        
        .feature-list {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .feature-list h4 {
            margin-top: 0;
            color: #1e1c72;
        }
        
        .feature-list ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .feature-list li {
            margin: 8px 0;
            color: #666;
        }
        
        .status-info {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        
        .status-info h4 {
            margin: 0 0 12px 0;
            color: #2e7d32;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e8f5e8;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-value {
            font-weight: 600;
            color: #2e7d32;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ ‡ç­¾é¡µåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="demo-section">
            <h2>æ ‡ç­¾é¡µåŠŸèƒ½æ¼”ç¤º</h2>
            <p>æ¼”ç¤ºæ ‡ç­¾é¡µçš„å…³é—­åŠŸèƒ½ã€å›ºå®šæ ‡ç­¾é¡µå’Œå¯¼èˆªè”åŠ¨</p>
            
            <div class="tabs-demo">
                <div class="tabs-header" id="tabsHeader">
                    <!-- æ ‡ç­¾é¡µå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                <div class="tabs-content" id="tabsContent">
                    <p>ç‚¹å‡»æ ‡ç­¾é¡µæˆ–ä¾§è¾¹æ æ¥åˆ‡æ¢å†…å®¹</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>å¯¼èˆªè”åŠ¨æ¼”ç¤º</h2>
            <p>å·¦ä¾§ä¾§è¾¹æ å’Œé¡¶éƒ¨æ ‡ç­¾é¡µçš„åŒå‘è”åŠ¨</p>
            
            <div class="sidebar-demo">
                <div class="sidebar">
                    <div class="sidebar-item active" data-path="/admin/settings">
                        âš™ï¸ æ¸¸æˆè®¾ç½®
                    </div>
                    <div class="sidebar-item" data-path="/admin/images">
                        ğŸ–¼ï¸ å›¾ç‰‡ç®¡ç†
                    </div>
                    <div class="sidebar-item" data-path="/admin/data">
                        ğŸ“ æ•°æ®ç®¡ç†
                    </div>
                    <div class="sidebar-item" data-path="/admin/about">
                        â„¹ï¸ å…³äº
                    </div>
                </div>
                
                <div class="content-area" id="contentArea">
                    <h3>æ¸¸æˆè®¾ç½®</h3>
                    <p>è¿™æ˜¯æ¸¸æˆè®¾ç½®é¡µé¢çš„å†…å®¹ã€‚ç‚¹å‡»å…¶ä»–ä¾§è¾¹æ é¡¹ç›®æˆ–æ ‡ç­¾é¡µæ¥æµ‹è¯•å¯¼èˆªè”åŠ¨ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>åŠŸèƒ½ç‰¹æ€§è¯´æ˜</h2>
            <div class="feature-list">
                <h4>âœ… å·²å®ç°çš„åŠŸèƒ½</h4>
                <ul>
                    <li><strong>å›ºå®šæ ‡ç­¾é¡µ</strong>ï¼šæ¸¸æˆè®¾ç½®æ ‡ç­¾é¡µä¸å¯å…³é—­ï¼ˆaffix: trueï¼‰</li>
                    <li><strong>å¯å…³é—­æ ‡ç­¾é¡µ</strong>ï¼šå…¶ä»–æ ‡ç­¾é¡µéƒ½æœ‰å…³é—­æŒ‰é’®ï¼ˆå°å‰ï¼‰</li>
                    <li><strong>å¯¼èˆªè”åŠ¨</strong>ï¼šç‚¹å‡»ä¾§è¾¹æ è‡ªåŠ¨æ‰“å¼€å¯¹åº”æ ‡ç­¾é¡µ</li>
                    <li><strong>æ ‡ç­¾é¡µåˆ‡æ¢</strong>ï¼šç‚¹å‡»æ ‡ç­¾é¡µè‡ªåŠ¨æ¿€æ´»å¯¹åº”ä¾§è¾¹æ é¡¹ç›®</li>
                    <li><strong>æ™ºèƒ½å…³é—­</strong>ï¼šå…³é—­æ ‡ç­¾é¡µæ—¶è‡ªåŠ¨è·³è½¬åˆ°å…¶ä»–å¯ç”¨æ ‡ç­¾é¡µ</li>
                    <li><strong>çŠ¶æ€ä¿æŒ</strong>ï¼šå…³é—­æ ‡ç­¾é¡µåï¼Œå†æ¬¡ç‚¹å‡»ä¾§è¾¹æ ä¼šé‡æ–°æ‰“å¼€</li>
                </ul>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>å½“å‰çŠ¶æ€</h2>
            <div class="status-info">
                <h4>å®æ—¶çŠ¶æ€ç›‘æ§</h4>
                <div class="status-item">
                    <span>å½“å‰æ¿€æ´»æ ‡ç­¾é¡µï¼š</span>
                    <span class="status-value" id="currentTab">/admin/settings</span>
                </div>
                <div class="status-item">
                    <span>å½“å‰æ¿€æ´»ä¾§è¾¹æ ï¼š</span>
                    <span class="status-value" id="currentSidebar">æ¸¸æˆè®¾ç½®</span>
                </div>
                <div class="status-item">
                    <span>å·²æ‰“å¼€æ ‡ç­¾é¡µæ•°é‡ï¼š</span>
                    <span class="status-value" id="openTabsCount">4</span>
                </div>
                <div class="status-item">
                    <span>å›ºå®šæ ‡ç­¾é¡µï¼š</span>
                    <span class="status-value">æ¸¸æˆè®¾ç½®</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿè·¯ç”±æ•°æ®
        const routes = [
            { path: '/admin/settings', title: 'æ¸¸æˆè®¾ç½®', affix: true, icon: 'âš™ï¸' },
            { path: '/admin/images', title: 'å›¾ç‰‡ç®¡ç†', affix: false, icon: 'ğŸ–¼ï¸' },
            { path: '/admin/data', title: 'æ•°æ®ç®¡ç†', affix: false, icon: 'ğŸ“' },
            { path: '/admin/about', title: 'å…³äº', affix: false, icon: 'â„¹ï¸' }
        ];
        
        // é¡µé¢å†…å®¹
        const pageContents = {
            '/admin/settings': {
                title: 'æ¸¸æˆè®¾ç½®',
                content: `
                    <h3>âš™ï¸ æ¸¸æˆè®¾ç½®</h3>
                    <p>è¿™æ˜¯æ¸¸æˆè®¾ç½®é¡µé¢çš„å†…å®¹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œé…ç½®æ¸¸æˆçš„å„ç§å‚æ•°ã€‚</p>
                    <ul>
                        <li>å…³å¡é…ç½®</li>
                        <li>å€’è®¡æ—¶è®¾ç½®</li>
                        <li>æ¸¸æˆè§„åˆ™</li>
                        <li>éš¾åº¦è°ƒæ•´</li>
                    </ul>
                `
            },
            '/admin/images': {
                title: 'å›¾ç‰‡ç®¡ç†',
                content: `
                    <h3>ğŸ–¼ï¸ å›¾ç‰‡ç®¡ç†</h3>
                    <p>è¿™æ˜¯å›¾ç‰‡ç®¡ç†é¡µé¢çš„å†…å®¹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œç®¡ç†æ¸¸æˆä¸­çš„å„ç§å›¾ç‰‡èµ„æºã€‚</p>
                    <ul>
                        <li>ä¸Šä¼ å›¾ç‰‡</li>
                        <li>å›¾ç‰‡ç¼–è¾‘</li>
                        <li>å›¾ç‰‡åˆ†ç±»</li>
                        <li>æ‰¹é‡æ“ä½œ</li>
                    </ul>
                `
            },
            '/admin/data': {
                title: 'æ•°æ®ç®¡ç†',
                content: `
                    <h3>ğŸ“ æ•°æ®ç®¡ç†</h3>
                    <p>è¿™æ˜¯æ•°æ®ç®¡ç†é¡µé¢çš„å†…å®¹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œç®¡ç†æ¸¸æˆçš„å„ç§æ•°æ®ã€‚</p>
                    <ul>
                        <li>æ•°æ®å¯¼å…¥</li>
                        <li>æ•°æ®å¯¼å‡º</li>
                        <li>æ•°æ®å¤‡ä»½</li>
                        <li>æ•°æ®æ¢å¤</li>
                    </ul>
                `
            },
            '/admin/about': {
                title: 'å…³äº',
                content: `
                    <h3>â„¹ï¸ å…³äº</h3>
                    <p>è¿™æ˜¯å…³äºé¡µé¢çš„å†…å®¹ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œäº†è§£ç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯ã€‚</p>
                    <ul>
                        <li>ç³»ç»Ÿç‰ˆæœ¬</li>
                        <li>æ›´æ–°æ—¥å¿—</li>
                        <li>æŠ€æœ¯æ”¯æŒ</li>
                        <li>è”ç³»æ–¹å¼</li>
                    </ul>
                `
            }
        };
        
        let currentPath = '/admin/settings';
        let openedTabs = ['/admin/settings']; // åˆå§‹åªæœ‰æ¸¸æˆè®¾ç½®æ ‡ç­¾é¡µ
        
        // åˆå§‹åŒ–æ ‡ç­¾é¡µ
        function initTabs() {
            const tabsHeader = document.getElementById('tabsHeader');
            tabsHeader.innerHTML = '';
            
            // å…ˆæ·»åŠ å›ºå®šæ ‡ç­¾é¡µ
            const affixTabs = routes.filter(route => route.affix);
            affixTabs.forEach(route => {
                if (!openedTabs.includes(route.path)) {
                    openedTabs.push(route.path);
                }
            });
            
            // ç”Ÿæˆæ‰€æœ‰æ ‡ç­¾é¡µ
            openedTabs.forEach(path => {
                const route = routes.find(r => r.path === path);
                if (route) {
                    const tabItem = document.createElement('div');
                    tabItem.className = `tab-item ${path === currentPath ? 'active' : ''} ${route.affix ? 'affix' : ''}`;
                    tabItem.setAttribute('data-path', path);
                    
                    const tabContent = `
                        <span>${route.icon} ${route.title}</span>
                        ${!route.affix ? '<span class="tab-close" onclick="closeTab(\'' + path + '\')">Ã—</span>' : ''}
                    `;
                    
                    tabItem.innerHTML = tabContent;
                    tabItem.onclick = () => switchTab(path);
                    tabsHeader.appendChild(tabItem);
                }
            });
            
            updateStatus();
        }
        
        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(path) {
            currentPath = path;
            
            // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-path') === path) {
                    tab.classList.add('active');
                }
            });
            
            // æ›´æ–°ä¾§è¾¹æ çŠ¶æ€
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-path') === path) {
                    item.classList.add('active');
                }
            });
            
            // æ›´æ–°å†…å®¹
            updateContent(path);
            updateStatus();
        }
        
        // å…³é—­æ ‡ç­¾é¡µ
        function closeTab(path) {
            const route = routes.find(r => r.path === path);
            if (route && route.affix) {
                return; // å›ºå®šæ ‡ç­¾é¡µä¸èƒ½å…³é—­
            }
            
            // ä»å·²æ‰“å¼€æ ‡ç­¾é¡µä¸­ç§»é™¤
            const index = openedTabs.indexOf(path);
            if (index > -1) {
                openedTabs.splice(index, 1);
            }
            
            // å¦‚æœå…³é—­çš„æ˜¯å½“å‰æ ‡ç­¾é¡µï¼Œåˆ™è·³è½¬åˆ°å…¶ä»–æ ‡ç­¾é¡µ
            if (currentPath === path) {
                const remainingTabs = openedTabs.filter(tabPath => tabPath !== path);
                if (remainingTabs.length > 0) {
                    // ä¼˜å…ˆè·³è½¬åˆ°å›ºå®šæ ‡ç­¾é¡µ
                    const affixTab = remainingTabs.find(tabPath => {
                        const r = routes.find(route => route.path === tabPath);
                        return r && r.affix;
                    });
                    const nextTab = affixTab || remainingTabs[0];
                    switchTab(nextTab);
                }
            }
            
            // é‡æ–°æ¸²æŸ“æ ‡ç­¾é¡µ
            initTabs();
        }
        
        // æ›´æ–°å†…å®¹
        function updateContent(path) {
            const contentArea = document.getElementById('contentArea');
            const pageContent = pageContents[path];
            
            if (pageContent) {
                contentArea.innerHTML = pageContent.content;
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            document.getElementById('currentTab').textContent = currentPath;
            document.getElementById('currentSidebar').textContent = pageContents[currentPath]?.title || 'æœªçŸ¥';
            document.getElementById('openTabsCount').textContent = openedTabs.length;
        }
        
        // ä¾§è¾¹æ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.onclick = () => {
                const path = item.getAttribute('data-path');
                
                // å¦‚æœæ ‡ç­¾é¡µä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ åˆ°å·²æ‰“å¼€æ ‡ç­¾é¡µ
                if (!openedTabs.includes(path)) {
                    openedTabs.push(path);
                }
                
                // åˆ‡æ¢åˆ°å¯¹åº”æ ‡ç­¾é¡µ
                switchTab(path);
                
                // é‡æ–°æ¸²æŸ“æ ‡ç­¾é¡µ
                initTabs();
            };
        });
        
        // åˆå§‹åŒ–
        initTabs();
        updateContent(currentPath);
        
        // æ·»åŠ æ–°æ ‡ç­¾é¡µçš„æ¼”ç¤º
        function addNewTab() {
            const newPath = '/admin/new';
            if (!openedTabs.includes(newPath)) {
                openedTabs.push(newPath);
                routes.push({
                    path: newPath,
                    title: 'æ–°é¡µé¢',
                    affix: false,
                    icon: 'ğŸ†•'
                });
                pageContents[newPath] = {
                    title: 'æ–°é¡µé¢',
                    content: `
                        <h3>ğŸ†• æ–°é¡µé¢</h3>
                        <p>è¿™æ˜¯ä¸€ä¸ªæ–°æ·»åŠ çš„é¡µé¢ï¼Œæ‚¨å¯ä»¥å…³é—­å®ƒã€‚</p>
                        <p>è¿™ä¸ªæ ‡ç­¾é¡µæ¼”ç¤ºäº†åŠ¨æ€æ·»åŠ æ ‡ç­¾é¡µçš„åŠŸèƒ½ã€‚</p>
                    `
                };
                initTabs();
                switchTab(newPath);
            }
        }
        
        // æ·»åŠ æ¼”ç¤ºæŒ‰é’®
        const demoButton = document.createElement('button');
        demoButton.textContent = 'ğŸ†• æ·»åŠ æ–°æ ‡ç­¾é¡µ';
        demoButton.style.cssText = `
            background: #1e1c72;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        `;
        demoButton.onclick = addNewTab;
        
        document.querySelector('.tabs-content').appendChild(demoButton);
    </script>
</body>
</html> 